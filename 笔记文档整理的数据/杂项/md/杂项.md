## KISSY(需要学习)

## Msql对象封装
+ 构造对象
```javascript
	class Mysql{
    static getInstance(){
        if(!Mysql.instance){
            Mysql.instance = new Mysql;
        }
        return Mysql.instance;
    }
    constructor(){
         let mysql = require("mysql");
         let config = require("./cofing.json");
         // 配置
         this.connection = mysql.createConnection(config);
         // 连接
         this.connection.connect();
    }
    select(sql){
        return new Promise((resolve,reject)=>{
            this.connection.query(sql,(err,data)=>{
                if(err){
                    reject(err.message);
                }else{
                     resolve(data);
                }
            })
        })
    }
    insert(str,arr){
        // let str = "insert"+table+""
         return new Promise((resolve,reject)=>{
             this.connection.query(str,arr,(err)=>{
                     if(err){
                        reject(err.message);
                    }else{
                        console.log('ok');
                         resolve("ok");
                    }
             })
        })}
    sqlall(str,arr){
        let parrs = [];
        for(let i=0;i<arr.length;i++){
             let pro = this.insert(str,arr[i]);
             parrs.push(pro);
        }   
          return Promise.all(parrs)
    }
}
module.exports = Mysql.getInstance();
```
## Promess 内部原理
```javascript 
var Promise = function () {
	this.thens = [];
};
Promise.prototype = {
	// 成功
	resolve: function () {
		var t = this.thens.shift(), n;
		t && (n = t.apply(null, arguments), 
		n instanceof Promise && (n.thens = this.thens));
	},
	then: function (n) {
		return this.thens.push(n),this;
	}
}
```
## MyTools
```javascript
	function MyTools(){
	this.trim=function(str){
		if(typeof(str) == "string"){
			console.log(str.length)
			 return str.replace(/(^\s*)|(\s*$)/g,'')
			 console.log(str)
			 return str
		}
	}
	this.typeofs=function()
	}
	let Tools = new MyTools()
	let str = Tools.trim("   my Name Is NOW  ");
	console.log(str)
```
# 引入mysql
+ 安装 cnpm install mysql
```javascript
 // 引入数据库
 let mysql = require('mysql');
 // 链接对象配置
 {
   host:'localhost', // 链接数据的地址
   user:'' // 链接数据库的用户名
   password:'' //链接数据库的密码
   port:"3306" //配置数据库的链接端口号 默认是3306
   database:''//需要链接的数据库
   "userConnectionPooling":true,
 }
 // 创建链接对象
 mysql.createConnection({链接对象配置})
 // 查询mysql的内容
 链接对象.query(sql,(err,data)=>{
   // err == 查询错误数据
   // data == 查询查来的数据
 }
```
## 设置全屏
```javascript
	function launchFullscreen(element) {
  if(element.requestFullscreen) {
    element.requestFullscreen();
  } else if(element.mozRequestFullScreen) {
    element.mozRequestFullScreen();
  } else if(element.webkitRequestFullscreen) {
    element.webkitRequestFullscreen();
  } else if(element.msRequestFullscreen) {
    element.msRequestFullscreen();
  }
}//退出全屏 
function exitFullscreen() {
    if (document.exitFullscreen) {
        document.exitFullscreen();
    } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
    } else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
    }
}
````
# 引入mongodb文件包
+ require('mongodb').MongoClient;
+ 链接
	- mongdb.connect(url,{},fun) 链接
```javascript
	const mongdb = require('mongodb').MongoClient;
	mongdb.connect(url,{useNewUrlParser: true ,useUnifiedTopology: true},function(err, db) {
		if (err) {throw err;}
		console.log("数据库已链接!");
		db.close();
	}
	),
```
+ 详细概述
	- db.db('database') 选择要操作的数据库 返回一个数据库的操作对象database
	- database.collection('表名').insertOne({},fn(err)) 插入一条数据
	- database.collection('表名').insertMany([{},{}],fn(err)) 插入多条数据
	- database.collection('表明').find({}||{name:'条件如果没有则填空对象'}).toArray((err,data)=>{})
	- database.collection('表明').updataOne(where,{$set:[]},(err,ds)) 更新一条数据
	- database.collection('表明').updataMany(where,{$set:[]},(err,ds)) 更新多条数据
	- database.collection('表名').deleteOne(wherr,fn(err,obj)) 删除一个数据
	- database.collection('表名').deleteMany(wherr,fn(err,obj)) 删除多个数据